---
all:
  children:
    infrastructure:
      hosts:
        opnsense:
          ansible_host: 10.0.10.1
          ansible_user: "{{ lookup('community.hashi_vault.vault_kv2_get', 'infrastructure/ssh', validate_certs=true).secret.opnsense_user }}"
          ansible_connection: ssh

        proxmox:
          ansible_host: 10.0.10.5
          ansible_user: "{{ lookup('community.hashi_vault.vault_kv2_get', 'infrastructure/ssh', validate_certs=true).secret.proxmox_user }}"
          ansible_connection: ssh

        vault:
          ansible_host: 10.0.10.21
          ansible_user: "{{ lookup('community.hashi_vault.vault_kv2_get', 'infrastructure/ssh', validate_certs=true).secret.vault_user }}"
          ansible_connection: ssh

        runner:
          ansible_host: 10.0.10.22
          ansible_user: "{{ lookup('community.hashi_vault.vault_kv2_get', 'infrastructure/ssh', validate_certs=true).secret.runner_user }}"
          ansible_connection: ssh

        authentik:
          ansible_host: 10.0.10.25
          ansible_user: "{{ lookup('community.hashi_vault.vault_kv2_get', 'infrastructure/ssh', validate_certs=true).secret.authentik_user }}"
          ansible_connection: ssh

        postgres:
          ansible_host: 10.0.10.23
          ansible_user: "{{ lookup('community.hashi_vault.vault_kv2_get', 'infrastructure/ssh', validate_certs=true).secret.postgres_user }}"
          ansible_connection: ssh

        akvorado:
          ansible_host: 10.0.10.26
          ansible_user: "{{ lookup('community.hashi_vault.vault_kv2_get', 'infrastructure/ssh', validate_certs=true).secret.akvorado_user }}"
          ansible_connection: ssh

        n8n:
          ansible_host: 10.0.10.27
          ansible_user: "{{ lookup('community.hashi_vault.vault_kv2_get', 'infrastructure/ssh', validate_certs=true).secret.n8n_user }}"
          ansible_connection: ssh

        lancache:
          ansible_host: 10.0.20.2
          ansible_user: "{{ lookup('community.hashi_vault.vault_kv2_get', 'infrastructure/ssh', validate_certs=true).secret.lancache_user }}"
          ansible_connection: ssh

    # Linux VMs that use rsyslog for log forwarding
    linux_vms:
      hosts:
        vault:
        runner:
        authentik:
        postgres:
        akvorado:
        n8n:
        lancache:

    # n8n workflow automation servers
    n8n_servers:
      hosts:
        n8n:

    # LANcache servers for game download caching
    lancache_servers:
      hosts:
        lancache:
