---
all:
  children:
    infrastructure:
      hosts:
        opnsense:
          ansible_host: 10.0.10.1
          ansible_user: "{{ lookup('community.hashi_vault.vault_kv2_get', 'infrastructure/ssh', validate_certs=false).secret.opnsense_user }}"
          ansible_connection: ssh

        proxmox:
          ansible_host: 10.0.10.5
          ansible_user: "{{ lookup('community.hashi_vault.vault_kv2_get', 'infrastructure/ssh', validate_certs=false).secret.proxmox_user }}"
          ansible_connection: ssh

        vault:
          ansible_host: 10.0.10.21
          ansible_user: "{{ lookup('community.hashi_vault.vault_kv2_get', 'infrastructure/ssh', validate_certs=false).secret.vault_user }}"
          ansible_connection: ssh

        runner:
          ansible_host: 10.0.10.22
          ansible_user: "{{ lookup('community.hashi_vault.vault_kv2_get', 'infrastructure/ssh', validate_certs=false).secret.runner_user }}"
          ansible_connection: ssh

        authentik:
          ansible_host: 10.0.10.25
          ansible_user: "{{ lookup('community.hashi_vault.vault_kv2_get', 'infrastructure/ssh', validate_certs=false).secret.authentik_user }}"
          ansible_connection: ssh

        postgres:
          ansible_host: 10.0.10.23
          ansible_user: "{{ lookup('community.hashi_vault.vault_kv2_get', 'infrastructure/ssh', validate_certs=false).secret.postgres_user }}"
          ansible_connection: ssh

    # Linux VMs that use rsyslog for log forwarding
    linux_vms:
      hosts:
        vault:
        runner:
        authentik:
        postgres:
