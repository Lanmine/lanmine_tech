apiVersion: helm.toolkit.fluxcd.io/v2
kind: HelmRelease
metadata:
  name: homer
  namespace: homer
spec:
  interval: 30m
  chart:
    spec:
      chart: homer
      version: "0.x"
      sourceRef:
        kind: HelmRepository
        name: gabe565
        namespace: homer
  install:
    remediation:
      retries: 3
  upgrade:
    remediation:
      retries: 3
  values:
    image:
      repository: b4bz/homer
      tag: latest

    # Disable default config generation
    env:
      INIT_ASSETS: "0"

    service:
      main:
        ports:
          http:
            port: 8080

    configMaps:
      config:
        enabled: true
        data:
          config.yml: |
            title: "Lanmine"
            subtitle: "Infrastructure Dashboard"
            logo: "assets/tools/sample.png"
            header: true
            footer: false

            theme: default
            colors:
              light:
                highlight-primary: "#3367d6"
                highlight-secondary: "#4285f4"
                highlight-hover: "#5a95f5"
                background: "#f5f5f5"
                card-background: "#ffffff"
                text: "#363636"
                text-header: "#424242"
                text-title: "#303030"
                text-subtitle: "#424242"
                card-shadow: rgba(0, 0, 0, 0.1)
                link: "#3273dc"
                link-hover: "#363636"
                background-image: false
              dark:
                highlight-primary: "#3367d6"
                highlight-secondary: "#4285f4"
                highlight-hover: "#5a95f5"
                background: "#131313"
                card-background: "#2b2b2b"
                text: "#eaeaea"
                text-header: "#ffffff"
                text-title: "#fafafa"
                text-subtitle: "#f5f5f5"
                card-shadow: rgba(0, 0, 0, 0.4)
                link: "#3273dc"
                link-hover: "#ffdd57"
                background-image: false

            links: []

            services:
              - name: "Infrastructure"
                icon: "fas fa-server"
                items:
                  - name: "Proxmox"
                    icon: "fas fa-cube"
                    subtitle: "Virtualization Platform"
                    url: "https://proxmox01.lionfish-caiman.ts.net:8006"
                    target: "_blank"
                  - name: "Vault"
                    icon: "fas fa-key"
                    subtitle: "Secrets Management"
                    url: "https://vault-01.lionfish-caiman.ts.net:8200"
                    target: "_blank"
                  - name: "OPNsense"
                    icon: "fas fa-shield-alt"
                    subtitle: "Firewall & Router"
                    url: "https://opnsense.lionfish-caiman.ts.net"
                    target: "_blank"

              - name: "Kubernetes"
                icon: "fas fa-dharmachakra"
                items:
                  - name: "Grafana"
                    icon: "fas fa-chart-line"
                    subtitle: "Monitoring & Dashboards"
                    url: "https://grafana.lionfish-caiman.ts.net"
                    target: "_blank"
                  - name: "Traefik"
                    icon: "fas fa-route"
                    subtitle: "Ingress Controller"
                    url: "https://traefik.lionfish-caiman.ts.net/dashboard/"
                    target: "_blank"

              - name: "Authentication"
                icon: "fas fa-user-shield"
                items:
                  - name: "Authentik"
                    icon: "fas fa-fingerprint"
                    subtitle: "Identity Provider"
                    url: "https://authentik-01.lionfish-caiman.ts.net"
                    target: "_blank"
