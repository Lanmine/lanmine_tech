apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: oxidized-secrets
  namespace: oxidized
spec:
  refreshInterval: 5m
  secretStoreRef:
    name: vault
    kind: ClusterSecretStore
  target:
    name: oxidized-secrets
    creationPolicy: Owner
  data:
    # IOS credentials from cisco-switch secret
    - secretKey: ios_username
      remoteRef:
        key: secret/infrastructure/cisco-switch
        property: user
    - secretKey: ios_password
      remoteRef:
        key: secret/infrastructure/cisco-switch
        property: password
    - secretKey: ios_enable_password
      remoteRef:
        key: secret/infrastructure/cisco-switch
        property: password

    # NXOS credentials (using same for now)
    - secretKey: nxos_username
      remoteRef:
        key: secret/infrastructure/cisco-switch
        property: user
    - secretKey: nxos_password
      remoteRef:
        key: secret/infrastructure/cisco-switch
        property: password

    # NetBox API token
    - secretKey: netbox_token
      remoteRef:
        key: secret/infrastructure/netbox
        property: api_token

    # Oxidized web UI password
    - secretKey: oxidized_password
      remoteRef:
        key: secret/infrastructure/oxidized
        property: web_password
